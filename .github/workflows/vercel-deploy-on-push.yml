# On push to main: deploy ai-academy-dashboard to Vercel production via CLI
# Project has Root Directory = ai-academy-dashboard, so we deploy from repo root.
# Secrets: VERCEL_TOKEN, VERCEL_GIT_EMAIL (Vercel account email â€“ must have team access)

name: Vercel Deploy on Push

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Set Git author for Vercel (must match team member)
        run: |
          git config user.email "${{ secrets.VERCEL_GIT_EMAIL }}"
          git config user.name "Vercel Deploy"

      - name: Deploy to Vercel
        env:
          VERCEL_ORG_ID: team_79xLIGLnrIoybEiGKxc17Pkq
          VERCEL_PROJECT_ID: prj_kjo9Q2mGffq6ybNjzszpJGDqPqQ5
        run: npx vercel deploy --prod --token "${{ secrets.VERCEL_TOKEN }}" --yes
